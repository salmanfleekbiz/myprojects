jQuery.fn.unitegallery=function(options){var element=jQuery(this);var galleryID="#"+element.attr("id");if(!options)var options={};var objGallery=new UniteGalleryMain();objGallery.run(galleryID,options);var api=new UG_API(objGallery);return(api);}
function ugCheckForMinJQueryVersion(){var isMinJQuery=g_ugFunctions.checkMinJqueryVersion("1.8.0");if(isMinJQuery==false)throw new Error("The gallery can run from jquery 1.8 You have jQuery "+jQuery.fn.jquery+" Please update your jQuery library.");}function ugCheckForErrors(galleryID,type){function checkForJqueryPresents(){if(typeof jQuery=="undefined")throw new Error("jQuery library not included");}function checkForDoubleJQuery(){if(typeof jQuery.fn.unitegallery=="function")return(true);var errorMessage="You have some jquery.js library include that comes after the gallery files js include.";errorMessage+="<br> This include eliminates the gallery libraries, and make it not work.";if(type=="cms"){errorMessage+="<br><br> To fix it you can:<br>&nbsp;&nbsp;&nbsp; 1. In the Gallery Settings -> Troubleshooting set option:  <strong><b>Put JS Includes To Body</b></strong> option to true.";errorMessage+="<br>&nbsp;&nbsp;&nbsp; 2. Find the double jquery.js include and remove it.";}else{errorMessage+="<br><br> Please find and remove this jquery.js include and the gallery will work. <br> * There should be only one jquery.js include before all other js includes in the page.";}throw new Error(errorMessage);}try{if(type=="jquery"){checkForJqueryPresents();ugCheckForMinJQueryVersion();}else{ugCheckForMinJQueryVersion();checkForDoubleJQuery();}}catch(objError){var message=objError.message;message="Unite Gallery Error: "+message;message="<div style='font-size:16px;color:#BC0C06;max-width:900px;border:1px solid red;padding:10px;'>"+message+"</div>"
if(type=="jquery"){var objGallery=document.getElementById(galleryID);objGallery.innerHTML=message;objGallery.style.display="block";}else
jQuery(galleryID).show().html(message);return(false);}return(true);}function UniteGalleryMain(){var t=this;var g_galleryID;var g_objGallery=jQuery(t),g_objWrapper,g_objParent;var g_objThumbs,g_objSlider,g_functions=new UGFunctions(),g_objTabs;var g_arrItems=[],g_numItems,g_selectedItem=null,g_selectedItemIndex=-1;var g_objTheme,g_objCache={};this.events={ITEM_CHANGE:"item_change",SIZE_CHANGE:"size_change",ENTER_FULLSCREEN:"enter_fullscreen",EXIT_FULLSCREEN:"exit_fullscreen",START_PLAY:"start_play",STOP_PLAY:"stop_play",PAUSE_PLAYING:"pause_playing",CONTINUE_PLAYING:"continue_playing",SLIDER_ACTION_START:"slider_action_start",SLIDER_ACTION_END:"slider_action_end",ITEM_IMAGE_UPDATED:"item_image_updated",GALLERY_KEYPRESS:"gallery_keypress",GALLERY_BEFORE_REQUEST_ITEMS:"gallery_before_request_items"};var g_options={gallery_width:900,gallery_height:500,gallery_min_width:150,gallery_min_height:100,gallery_theme:"default",gallery_skin:"default",gallery_images_preload_type:"minimal",gallery_autoplay:false,gallery_play_interval:3000,gallery_pause_on_mouseover:true,gallery_mousewheel_role:"zoom",gallery_control_keyboard:true,gallery_carousel:true,gallery_preserve_ratio:true,gallery_background_color:"",gallery_debug_errors:false,gallery_shuffle:false,gallery_urlajax:null,gallery_enable_tabs:false,gallery_enable_cache:true,gallery_initial_catid:""};var g_temp={objCustomOptions:{},isAllItemsPreloaded:false,isFreestyleMode:false,lastWidth:0,lastHeigh:0,handleResize:null,isInited:false,isPlayMode:false,isPlayModePaused:false,playTimePassed:0,playTimeLastStep:0,playHandle:"",playStepInterval:33,objProgress:null,isFakeFullscreen:false,thumbsType:null,isYoutubePresent:false,isVimeoPresent:false,isHtml5VideoPresent:false,isSoundCloudPresent:false,isWistiaPresent:false,resizeDelay:100,isRunFirstTime:true,originalOptions:{}};function __________INIT_GALLERY_______(){};function getThemeFunction(themeName){var themeFunction=themeName;if(themeFunction.indexOf("UGTheme_")==-1)themeFunction="UGTheme_"+themeFunction;return(themeFunction);}function initTheme(objCustomOptions){if(objCustomOptions.hasOwnProperty("gallery_theme"))g_options.gallery_theme=objCustomOptions.gallery_theme;else{var defaultTheme=g_options.gallery_theme;if(g_ugFunctions.isThemeRegistered(defaultTheme)==false)g_options.gallery_theme=g_ugFunctions.getFirstRegisteredTheme();}var themeFunction=getThemeFunction(g_options.gallery_theme);try{g_options.gallery_theme=eval(themeFunction);}catch(e){};g_options.gallery_theme=eval(themeFunction);g_objTheme=new g_options.gallery_theme();g_objTheme.init(t,objCustomOptions);}function resetOptions(){g_options=jQuery.extend({},g_temp.originalOptions);g_selectedItemIndex=-1;g_selectedItem=null;g_objSlider=undefined;g_objThumbs=undefined;g_objSlider=undefined;}function checkForStartupErrors(){try{ugCheckForMinJQueryVersion();}catch(e){throwErrorShowMessage(e.message);}if(typeof g_objWrapper.outerWidth()=="object")throwErrorShowMessage("You have some buggy script. most chances jquery-ui.js that destroy jquery outerWidth, outerHeight functions. The gallery can't run. Please update jquery-ui.js to latest version.");setTimeout(function(){ugCheckForErrors(g_galleryID,"cms")},5000);}function runGallery(galleryID,objCustomOptions,htmlItems,cacheID){var isCustomOptions=(typeof objCustomOptions=="object");if(isCustomOptions)g_temp.objCustomOptions=objCustomOptions;if(g_temp.isRunFirstTime==true){g_galleryID=galleryID;g_objWrapper=jQuery(g_galleryID);if(g_objWrapper.length==0){trace("div with id: "+g_galleryID+" not found");return(false);}g_objParent=g_objWrapper.parent();checkForStartupErrors();g_temp.originalOptions=jQuery.extend({},g_options);if(isCustomOptions)g_options=jQuery.extend(g_options,objCustomOptions);if(g_options.gallery_enable_cache==true&&g_options.gallery_initial_catid)cacheItems(g_options.gallery_initial_catid);var objItems=g_objWrapper.children();fillItemsArray(objItems);loadAPIs();g_objWrapper.find("img").fadeTo(0,0).hide();g_objWrapper.show();clearInitData();}else{t.destroy();resetOptions();g_options=jQuery.extend(g_options,g_temp.objCustomOptions);if(htmlItems){if(cacheID&&g_options.gallery_enable_cache==true)cacheItems(cacheID,htmlItems);if(htmlItems=="noitems"){showErrorMessage("No items in this category","");return(false);}g_objWrapper.html(htmlItems);var objItems=g_objWrapper.children();fillItemsArray(objItems);loadAPIs();g_objWrapper.children().fadeTo(0,0).hide();g_objWrapper.show();clearInitData();}}if(g_temp.isRunFirstTime==true&&g_options.gallery_enable_tabs==true){g_objTabs=new UGTabs();g_objTabs.init(t,g_options);}if(isCustomOptions)modifyInitParams(g_temp.objCustomOptions);validateParams();if(g_options.gallery_shuffle==true)t.shuffleItems();initTheme(g_temp.objCustomOptions);setGalleryHtml();setHtmlObjectsProperties();var galleryWidth=g_objWrapper.width();if(galleryWidth==0){g_functions.waitForWidth(g_objWrapper,runGalleryActually);}else
runGalleryActually();}function runGalleryActually(){t.setSizeClass();if(g_temp.isFreestyleMode==false){if(g_options.gallery_preserve_ratio==true)setHeightByOriginalRatio();}g_objTheme.run();if(g_objTabs)g_objTabs.run();preloadBigImages();initEvents();if(g_numItems>0)t.selectItem(0);if(g_options.gallery_autoplay==true)t.startPlayMode();g_temp.isRunFirstTime=false;}function showErrorMessage(message,prefix){if(typeof prefix=="undefined")var prefix="<b>Unite Gallery Error: </b>";message=prefix+message;var html="<div class='ug-error-message-wrapper'><div class='ug-error-message'>"+message+"</div></div>";g_objWrapper.children().remove();g_objWrapper.html(html);g_objWrapper.show();}function throwErrorShowMessage(message){showErrorMessage(message);throw new Error(message);}function modifyInitParams(){if(!g_options.gallery_images_preload_type)g_options.gallery_images_preload_type="minimal";if(g_options.gallery_min_height==undefined||g_options.gallery_height<g_options.gallery_min_height){g_options.gallery_min_height=0;}if(g_options.gallery_min_width==undefined||g_options.gallery_width<g_options.gallery_min_width){g_options.gallery_min_width=0;}}function validateParams(){if(!g_options.gallery_theme)throw new Error("The gallery can't run without theme");if(jQuery.isNumeric(g_options.gallery_height)&&g_options.gallery_height<g_options.gallery_min_height)throw new Error("The <b>gallery_height</b> option must be bigger then <b>gallery_min_height option</b>");if(g_options.gallery_width<g_options.gallery_min_width)throw new Error("The <b>gallery_width</b> option must be bigger then <b>gallery_min_width option</b>");}function setGalleryHtml(){g_objWrapper.addClass("ug-gallery-wrapper");g_objWrapper.append("<div class='ug-overlay-disabled' style='display:none'></div>");t.setSizeClass();}function clearInitData(){var objItems=g_objWrapper.children().remove();}function storeLastSize(){var objSize=t.getSize();g_temp.lastWidth=objSize.width;g_temp.lastHeight=objSize.height;}function setHeightByOriginalRatio(){var objSize=t.getSize();var ratio=objSize.width/objSize.height;if(ratio!=objSize.orig_ratio){var newHeight=objSize.width/objSize.orig_ratio;newHeight=Math.round(newHeight);if(newHeight<g_options.gallery_min_height)newHeight=g_options.gallery_min_height;g_objWrapper.height(newHeight);}}function setHtmlObjectsProperties(){var optionWidth=g_functions.getCssSizeParam(g_options.gallery_width);var objCss={"max-width":optionWidth,"min-width":g_functions.getCssSizeParam(g_options.gallery_min_width)};if(g_temp.isFreestyleMode==false){var galleryHeight=g_functions.getCssSizeParam(g_options.gallery_height);objCss["height"]=galleryHeight;}else{objCss["overflow"]="visible";}if(g_options.gallery_background_color)objCss["background-color"]=g_options.gallery_background_color;g_objWrapper.css(objCss);}function fillItemsArray(arrChildren){g_arrItems=[];var numIndex=0;for(var i=0;i<arrChildren.length;i++){var objChild=jQuery(arrChildren[i]);var tagname=objChild.prop("tagName").toLowerCase();var itemLink="";if(tagname=="a"){itemLink=objChild.attr("href");objChild=objChild.children();var tagname=objChild.prop("tagName").toLowerCase();}var itemType=objChild.data("type");if(itemType==undefined)itemType="image";var objItem={};objItem.type=itemType;if(tagname=="img"){objItem.urlThumb=objChild.attr("src");objItem.title=objChild.attr("alt");objItem.objThumbImage=objChild;}else{if(itemType=="image")throw new Error("The item should not be image type");objItem.urlThumb=objChild.data("thumb");objItem.title=objChild.data("title");objItem.objThumbImage=null;}objItem.link=itemLink;objItem.description=objChild.attr("title");if(!objItem.description)objItem.description=objChild.data("description");if(!objItem.description)objItem.description="";objItem.isLoaded=false;objItem.isThumbImageLoaded=false;objItem.objPreloadImage=null;objItem.urlImage=objChild.data("image");objItem.isBigImageLoadStarted=false;objItem.isBigImageLoaded=false;objItem.isBigImageLoadError=false;objItem.imageWidth=0;objItem.imageHeight=0;objItem.thumbWidth=0;objItem.thumbHeight=0;objItem.thumbRatioByWidth=0;objItem.thumbRatioByHeight=0;objItem.addHtml=null;var isImageMissing=(objItem.urlImage==undefined||objItem.urlImage=="");var isThumbMissing=(objItem.urlThumb==undefined||objItem.urlThumb=="");switch(objItem.type){case"youtube":objItem.videoid=objChild.data("videoid");if(isImageMissing||isThumbMissing){var objImages=g_ugYoutubeAPI.getVideoImages(objItem.videoid);if(isImageMissing)objItem.urlImage=objImages.preview;if(isThumbMissing){objItem.urlThumb=objImages.thumb;if(tagname=="img")objChild.attr("src",objItem.urlThumb);}}g_temp.isYoutubePresent=true;break;case"vimeo":objItem.videoid=objChild.data("videoid");g_temp.isVimeoPresent=true;break;case"html5video":objItem.videoogv=objChild.data("videoogv");objItem.videowebm=objChild.data("videowebm");objItem.videomp4=objChild.data("videomp4");g_temp.isHtml5VideoPresent=true;break;case"soundcloud":objItem.trackid=objChild.data("trackid");g_temp.isSoundCloudPresent=true;break;case"wistia":objItem.videoid=objChild.data("videoid");g_temp.isWistiaPresent=true;break;case"custom":var objChildImage=objChild.children("img");if(objChildImage.length){objChildImage=jQuery(objChildImage[0]);objItem.urlThumb=objChildImage.attr("src");objItem.title=objChildImage.attr("alt");objItem.objThumbImage=objChildImage;}var objChildren=objChild.children().not("img:first-child");if(objChildren.length)objItem.addHtml=objChildren.clone();break;}if(objItem.objThumbImage){objItem.objThumbImage.removeAttr("data-description","");objItem.objThumbImage.removeAttr("data-image","");objItem.objThumbImage.removeAttr("title","");}objItem.index=numIndex;g_arrItems.push(objItem);numIndex++;}g_numItems=g_arrItems.length;}function loadAPIs(){if(g_temp.isYoutubePresent)g_ugYoutubeAPI.loadAPI();if(g_temp.isVimeoPresent)g_ugVimeoAPI.loadAPI();if(g_temp.isHtml5VideoPresent)g_ugHtml5MediaAPI.loadAPI();if(g_temp.isSoundCloudPresent)g_ugSoundCloudAPI.loadAPI();if(g_temp.isWistiaPresent)g_ugWistiaAPI.loadAPI();}function preloadBigImages(){if(g_options.gallery_images_preload_type=="visible"&&!g_objThumbs)g_options.gallery_images_preload_type="minimal";if(g_temp.isAllItemsPreloaded==true)return(true);switch(g_options.gallery_images_preload_type){default:case"minimal":break;case"all":jQuery(g_arrItems).each(function(){preloadItemImage(this);});break;case"visible":jQuery(g_arrItems).each(function(){var objItem=this;var isVisible=g_objThumbs.isItemThumbVisible(objItem);if(isVisible==true)preloadItemImage(objItem);});break;}}function checkPreloadItemImage(objItem){if(objItem.isBigImageLoadStarted==true||objItem.isBigImageLoaded==true||objItem.isBigImageLoadError==true){return(false);}switch(g_options.gallery_images_preload_type){default:case"minimal":break;case"all":preloadItemImage(objItem);break;case"visible":var isVisible=g_objThumbs.isItemThumbVisible(objItem);if(isVisible==true)preloadItemImage(objItem);break;}}function preloadItemImage(objItem){if(objItem.isBigImageLoadStarted==true||objItem.isBigImageLoaded==true||objItem.isBigImageLoadError==true){return(true);}var imageUrl=objItem.urlImage;if(imageUrl==""||imageUrl==undefined){objItem.isBigImageLoadError=true;return(false);}objItem.isBigImageLoadStarted=true;objItem.objPreloadImage=jQuery('<img/>').attr("src",imageUrl);objItem.objPreloadImage.data("itemIndex",objItem.index);objItem.objPreloadImage.on("load",t.onItemBigImageLoaded);objItem.objPreloadImage.on("error",function(){var objImage=jQuery(this);var itemIndex=objImage.data("itemIndex");var objItem=g_arrItems[itemIndex];objItem.isBigImageLoadError=true;objItem.isBigImageLoaded=false;var imageUrl=jQuery(this).attr("src");console.log("Can't load image: "+imageUrl);g_objGallery.trigger(t.events.ITEM_IMAGE_UPDATED,[itemIndex,objItem.urlImage]);objItem.objThumbImage.attr("src",objItem.urlThumb);});checkAllItemsStartedPreloading();}this.onItemBigImageLoaded=function(event,objImage){if(!objImage)var objImage=jQuery(this);var itemIndex=objImage.data("itemIndex");var objItem=g_arrItems[itemIndex];objItem.isBigImageLoaded=true;var objSize=g_functions.getImageOriginalSize(objImage);objItem.imageWidth=objSize.width;objItem.imageHeight=objSize.height;}
this.checkFillImageSize=function(objImage,objItem){if(!objItem){var itemIndex=objImage.data("itemIndex");if(itemIndex===undefined)throw new Error("Wrong image given to gallery.checkFillImageSize");var objItem=g_arrItems[itemIndex];}var objSize=g_functions.getImageOriginalSize(objImage);objItem.imageWidth=objSize.width;objItem.imageHeight=objSize.height;}
function preloadNearBigImages(objItem){if(g_temp.isAllItemsPreloaded==true)return(false);if(!objItem)var objItem=g_selectedItem;if(!objItem)return(true);var currentIndex=objItem.index;var lastItemIndex=currentIndex-1;var nextItemIndex=currentIndex+1;if(lastItemIndex>0)preloadItemImage(g_arrItems[lastItemIndex]);if(nextItemIndex<g_numItems)preloadItemImage(g_arrItems[nextItemIndex]);}function checkAllItemsStartedPreloading(){if(g_temp.isAllItemsPreloaded==true)return(false);for(var index in g_arrItems){if(g_arrItems[index].isBigImageLoadStarted==false)return(false);}g_temp.isAllItemsPreloaded=true;}this.setFreestyleMode=function(){g_temp.isFreestyleMode=true;}
this.attachThumbsPanel=function(type,objThumbs){g_temp.thumbsType=type;g_objThumbs=objThumbs;}
this.initSlider=function(customOptions,optionsPrefix){if(!customOptions)var customOptions={};customOptions=jQuery.extend(customOptions,g_temp.objCustomOptions);g_objSlider=new UGSlider();g_objSlider.init(t,customOptions,optionsPrefix);}
function __________END_INIT_GALLERY_______(){};function __________EVENTS_____________(){};this.onGalleryMouseWheel=function(event,delta,deltaX,deltaY){event.preventDefault();if(delta>0)t.prevItem();else
t.nextItem();}
function onSliderMouseEnter(event){if(g_options.gallery_pause_on_mouseover==true&&t.isFullScreen()==false&&g_temp.isPlayMode==true&&g_objSlider&&g_objSlider.isSlideActionActive()==false)t.pausePlaying();}function onSliderMouseLeave(event){if(g_options.gallery_pause_on_mouseover==true&&g_temp.isPlayMode==true&&g_objSlider&&g_objSlider.isSlideActionActive()==false){var isStillLoading=g_objSlider.isCurrentSlideLoadingImage();if(isStillLoading==false)t.continuePlaying();}}function onKeyPress(event){var keyCode=(event.charCode)?event.charCode:((event.keyCode)?event.keyCode:((event.which)?event.which:0));switch(keyCode){case 39:t.nextItem();event.preventDefault();break;case 37:t.prevItem();event.preventDefault();break;}g_objGallery.trigger(t.events.GALLERY_KEYPRESS,keyCode);}function onGalleryResized(){var objSize=t.getSize();if(objSize.width==0)return(true);t.setSizeClass();var objSize=t.getSize();if(objSize.width!=g_temp.lastWidth||objSize.height!=g_temp.lastHeight){if(g_options.gallery_preserve_ratio==true&&g_temp.isFreestyleMode==false)setHeightByOriginalRatio();storeLastSize();g_objGallery.trigger(t.events.SIZE_CHANGE);}}function onThumbsChange(event){if(g_options.gallery_images_preload_type=="visible"&&g_temp.isAllItemsPreloaded==false){preloadBigImages();}}function onFullScreenChange(){var isFullscreen=g_functions.isFullScreen();var event=isFullscreen?t.events.ENTER_FULLSCREEN:t.events.EXIT_FULLSCREEN;var fullscreenID=g_functions.getGlobalData("fullscreenID");if(g_galleryID!==fullscreenID)return(true);if(isFullscreen){g_objWrapper.addClass("ug-fullscreen");}else{g_objWrapper.removeClass("ug-fullscreen");}g_objGallery.trigger(event);onGalleryResized();}function onItemImageUpdated(event,index){var objItem=t.getItem(index);checkPreloadItemImage(objItem);}function onCurrentSlideImageLoadEnd(){if(t.isPlayMode()==true)t.continuePlaying();}function initEvents(){g_objWrapper.on("dragstart",function(event){event.preventDefault();});g_objGallery.on(t.events.ITEM_IMAGE_UPDATED,onItemImageUpdated);if(g_objThumbs){switch(g_temp.thumbsType){case"strip":jQuery(g_objThumbs).on(g_objThumbs.events.STRIP_MOVE,onThumbsChange);break;case"grid":jQuery(g_objThumbs).on(g_objThumbs.events.PANE_CHANGE,onThumbsChange);break;}}if(g_options.gallery_mousewheel_role=="advance"&&g_temp.isFreestyleMode==false)g_objWrapper.on("mousewheel",t.onGalleryMouseWheel);storeLastSize();jQuery(window).resize(function(){g_objWrapper.css("width","auto");g_functions.whenContiniousEventOver("gallery_resize",onGalleryResized,g_temp.resizeDelay);});g_functions.addFullScreenChangeEvent(onFullScreenChange);if(g_objSlider){jQuery(g_objSlider).on(g_objSlider.events.ITEM_CHANGED,function(){var sliderIndex=g_objSlider.getCurrentItemIndex();if(sliderIndex!=-1)t.selectItem(sliderIndex);});if(g_options.gallery_pause_on_mouseover==true){var sliderElement=g_objSlider.getElement();sliderElement.hover(onSliderMouseEnter,onSliderMouseLeave);g_objGallery.on(t.events.ENTER_FULLSCREEN,function(){onSliderMouseLeave();});}retriggerEvent(g_objSlider,g_objSlider.events.ACTION_START,t.events.SLIDER_ACTION_START);retriggerEvent(g_objSlider,g_objSlider.events.ACTION_END,t.events.SLIDER_ACTION_END);jQuery(g_objSlider).on(g_objSlider.events.CURRENTSLIDE_LOAD_END,onCurrentSlideImageLoadEnd);}if(g_options.gallery_control_keyboard==true)jQuery(document).keydown(onKeyPress);}this.destroy=function(){g_objWrapper.off("dragstart");g_objGallery.off(t.events.ITEM_IMAGE_UPDATED);if(g_objThumbs){switch(g_temp.thumbsType){case"strip":jQuery(g_objThumbs).off(g_objThumbs.events.STRIP_MOVE);break;case"grid":jQuery(g_objThumbs).off(g_objThumbs.events.PANE_CHANGE);break;}}g_objWrapper.off("mousewheel");jQuery(window).off("resize");g_functions.destroyFullScreenChangeEvent();if(g_objSlider){jQuery(g_objSlider).off(g_objSlider.events.ITEM_CHANGED);var sliderElement=g_objSlider.getElement();sliderElement.off("mouseenter");sliderElement.off("mouseleave");g_objGallery.off(t.events.ENTER_FULLSCREEN);jQuery(g_objSlider).off(g_objSlider.events.ACTION_START);jQuery(g_objSlider).off(g_objSlider.events.ACTION_END);jQuery(g_objSlider).off(g_objSlider.events.CURRENTSLIDE_LOAD_END);}if(g_options.gallery_control_keyboard==true)jQuery(document).off("keydown");if(g_objTheme&&typeof g_objTheme.destroy=="function"){g_objTheme.destroy();}g_objWrapper.html("");}
function __________GENERAL_______(){};this.getArrItems=function(){return g_arrItems;}
this.getObjects=function(){var objects={g_galleryID:g_galleryID,g_objWrapper:g_objWrapper,g_objThumbs:g_objThumbs,g_objSlider:g_objSlider,g_options:g_options,g_arrItems:g_arrItems,g_numItems:g_numItems};return(objects);}
this.getObjSlider=function(){return(g_objSlider);}
this.getItem=function(index){if(index<0){throw new Error("item with index: "+index+" not found");return(null);}if(index>=g_numItems){throw new Error("item with index: "+index+" not found");return(null);}return(g_arrItems[index]);}
this.getWidth=function(){var objSize=t.getSize();return(objSize.width);}
this.getHeight=function(){var objSize=t.getSize();return(objSize.height);}
this.getSize=function(){var objSize=g_functions.getElementSize(g_objWrapper);objSize.orig_width=g_options.gallery_width;objSize.orig_height=g_options.gallery_height;objSize.orig_ratio=objSize.orig_width/objSize.orig_height;return(objSize);}
this.getGalleryID=function(){var id=g_galleryID.replace("#","");return(id);}
this.getNextItem=function(index,forceCarousel){if(typeof index=="object")index=index.index;var nextIndex=index+1;if(forceCarousel!==true&&g_numItems==1)return(null);if(nextIndex>=g_numItems){if(g_options.gallery_carousel==true||forceCarousel===true)nextIndex=0;else
return(null);}var objItem=g_arrItems[nextIndex];return(objItem);}
this.getPrevItem=function(index){if(typeof index=="object")index=index.index;var prevIndex=index-1;if(prevIndex<0){if(g_options.gallery_carousel==true||forceCarousel===true)prevIndex=g_numItems-1;else
return(null);}var objItem=g_arrItems[prevIndex];return(objItem);}
this.getSelectedItem=function(){return(g_selectedItem);}
this.getSelectedItemIndex=function(){return(g_selectedItemIndex);}
this.getNumItems=function(){return g_numItems;}
this.isLastItem=function(){if(g_selectedItemIndex==g_numItems-1)return(true);return(false);}
this.isFirstItem=function(){if(g_selectedItemIndex==0)return(true);return(false);}
this.getOptions=function(){return g_options;}
this.getElement=function(){return(g_objWrapper);}
this.___________SET_CONTROLS___________=function(){}
this.setNextButton=function(objButton){objButton.data("ug-button",true);g_functions.setButtonOnClick(objButton,t.nextItem);}
this.setPrevButton=function(objButton){objButton.data("ug-button",true);g_functions.setButtonOnClick(objButton,t.prevItem);}
this.setFullScreenToggleButton=function(objButton){objButton.data("ug-button",true);g_functions.setButtonOnClick(objButton,t.toggleFullscreen);g_objGallery.on(t.events.ENTER_FULLSCREEN,function(){objButton.addClass("ug-fullscreenmode");});g_objGallery.on(t.events.EXIT_FULLSCREEN,function(){objButton.removeClass("ug-fullscreenmode");});}
this.destroyFullscreenButton=function(objButton){g_functions.destroyButton(objButton);g_objGallery.off(t.events.ENTER_FULLSCREEN);g_objGallery.off(t.events.EXIT_FULLSCREEN);}
this.setPlayButton=function(objButton){objButton.data("ug-button",true);g_functions.setButtonOnClick(objButton,t.togglePlayMode);g_objGallery.on(t.events.START_PLAY,function(){objButton.addClass("ug-stop-mode");});g_objGallery.on(t.events.STOP_PLAY,function(){objButton.removeClass("ug-stop-mode");});}
this.destroyPlayButton=function(objButton){g_functions.destroyButton(objButton);g_objGallery.off(t.events.START_PLAY);g_objGallery.off(t.events.STOP_PLAY);}
this.setProgressIndicator=function(objProgress){g_temp.objProgress=objProgress;}
this.setTextContainers=function(objTitle,objDescription){g_objGallery.on(t.events.ITEM_CHANGE,function(){var objItem=t.getSelectedItem();objTitle.html(objItem.title);objDescription.html(objItem.description);});}
this.showDisabledOverlay=function(){g_objWrapper.children(".ug-overlay-disabled").show();}
this.hideDisabledOverlay=function(){g_objWrapper.children(".ug-overlay-disabled").hide();}
this.___________END_SET_CONTROLS___________=function(){}
function cacheItems(cacheID,htmlItemsArg){if(htmlItemsArg){var htmlItems=htmlItemsArg;if(htmlItems!="noitems")htmlItems=jQuery(htmlItemsArg).clone();}else{var htmlItems=g_objWrapper.children().clone();}g_objCache[cacheID]=htmlItems;}function removeAllSizeClasses(objWrapper){if(!objWrapper)objWrapper=g_objWrapper;objWrapper.removeClass("ug-under-480");objWrapper.removeClass("ug-under-780");objWrapper.removeClass("ug-under-960");}function retriggerEvent(object,originalEvent,newEvent){jQuery(object).on(originalEvent,function(event){g_objGallery.trigger(newEvent,[this]);});}function advanceNextStep(){var timeNow=jQuery.now();var timeDiff=timeNow-g_temp.playTimeLastStep;g_temp.playTimePassed+=timeDiff;g_temp.playTimeLastStep=timeNow;if(g_temp.objProgress){var percent=g_temp.playTimePassed/g_options.gallery_play_interval;g_temp.objProgress.setProgress(percent);}if(g_temp.playTimePassed>=g_options.gallery_play_interval){t.nextItem();g_temp.playTimePassed=0;}}this.___________PLAY_MODE___________=function(){}
this.startPlayMode=function(){g_temp.isPlayMode=true;g_temp.isPlayModePaused=false;g_temp.playTimePassed=0;g_temp.playTimeLastStep=jQuery.now();g_temp.playHandle=setInterval(advanceNextStep,g_temp.playStepInterval);if(g_temp.objProgress){var objElement=g_temp.objProgress.getElement();g_temp.objProgress.setProgress(0);objElement.show();}g_objGallery.trigger(t.events.START_PLAY);if(g_objSlider&&g_objSlider.isCurrentSlideLoadingImage()==true){t.pausePlaying();}}
this.resetPlaying=function(){if(g_temp.isPlayMode==false)return(true);g_temp.playTimePassed=0;g_temp.playTimeLastStep=jQuery.now();}
this.pausePlaying=function(){if(g_temp.isPlayModePaused==true)return(true);g_temp.isPlayModePaused=true;clearInterval(g_temp.playHandle);g_objGallery.trigger(t.events.PAUSE_PLAYING);}
this.continuePlaying=function(){if(g_temp.isPlayModePaused==false)return(true);g_temp.isPlayModePaused=false;g_temp.playTimeLastStep=jQuery.now();g_temp.playHandle=setInterval(advanceNextStep,g_temp.playStepInterval);}
this.stopPlayMode=function(){g_temp.isPlayMode=false;clearInterval(g_temp.playHandle);g_temp.playTimePassed=0;if(g_temp.objProgress){var objElement=g_temp.objProgress.getElement();objElement.hide();}g_objGallery.trigger(t.events.STOP_PLAY);}
this.isPlayMode=function(){return(g_temp.isPlayMode);}
this.togglePlayMode=function(){if(t.isPlayMode()==false)t.startPlayMode();else
t.stopPlayMode();}
function unselectSeletedItem(){if(g_selectedItem==null)return(true);if(g_objThumbs)g_objThumbs.setThumbUnselected(g_selectedItem.objThumbWrapper);g_selectedItem=null;g_selectedItemIndex=-1;}this.___________GENERAL_EXTERNAL___________=function(){}
this.shuffleItems=function(){g_arrItems=g_functions.arrayShuffle(g_arrItems);for(var index in g_arrItems)g_arrItems[index].index=parseInt(index);}
this.setOptions=function(customOptions){g_options=jQuery.extend(g_options,customOptions);}
this.selectItem=function(objItem){if(typeof objItem=="number")objItem=t.getItem(objItem);var itemIndex=objItem.index;if(itemIndex==g_selectedItemIndex)return(true);unselectSeletedItem();g_selectedItem=objItem;g_selectedItemIndex=itemIndex;g_objGallery.trigger(t.events.ITEM_CHANGE,objItem);if(g_temp.isPlayMode==true){t.resetPlaying();var stillLoading=g_objSlider.isCurrentSlideLoadingImage();if(stillLoading==true)t.pausePlaying();}}
this.nextItem=function(){var newItemIndex=g_selectedItemIndex+1;if(g_numItems==0)return(true);if(g_options.gallery_carousel==false&&newItemIndex>=g_numItems)return(true);if(newItemIndex>=g_numItems)newItemIndex=0;t.selectItem(newItemIndex);}
this.prevItem=function(){var newItemIndex=g_selectedItemIndex-1;if(g_selectedItemIndex==-1)newItemIndex=0;if(g_numItems==0)return(true);if(g_options.gallery_carousel==false&&newItemIndex<0)return(true);if(newItemIndex<0)newItemIndex=g_numItems-1;t.selectItem(newItemIndex);}
function toFakeFullScreen(){jQuery("body").addClass("ug-body-fullscreen");g_objWrapper.addClass("ug-fake-fullscreen");g_temp.isFakeFullscreen=true;g_objGallery.trigger(t.events.ENTER_FULLSCREEN);g_objGallery.trigger(t.events.SIZE_CHANGE);}function exitFakeFullscreen(){jQuery("body").removeClass("ug-body-fullscreen");g_objWrapper.removeClass("ug-fake-fullscreen");g_temp.isFakeFullscreen=false;g_objGallery.trigger(t.events.EXIT_FULLSCREEN);g_objGallery.trigger(t.events.SIZE_CHANGE);}this.isFullScreen=function(){if(g_temp.isFakeFullscreen==true)return(true);if(g_functions.isFullScreen()==true)return(true);return(false);}
this.isFakeFullscreen=function(){return(g_temp.isFakeFullscreen);}
this.toFullScreen=function(){g_functions.setGlobalData("fullscreenID",g_galleryID);var divGallery=g_objWrapper.get(0);var isSupported=g_functions.toFullscreen(divGallery);if(isSupported==false)toFakeFullScreen();}
this.exitFullScreen=function(){if(g_temp.isFakeFullscreen==true)exitFakeFullscreen();else
g_functions.exitFullscreen();}
this.toggleFullscreen=function(){if(t.isFullScreen()==false){t.toFullScreen();}else{t.exitFullScreen();}}
this.resize=function(newWidth,newHeight,noevent){g_objWrapper.css("width","auto");g_objWrapper.css("max-width",newWidth+"px");if(newHeight)g_objWrapper.height(newHeight);if(!noevent&&noevent!==true)onGalleryResized();}
this.setSizeClass=function(objWrapper,width){if(!objWrapper)var objWrapper=g_objWrapper;if(!width){var objSize=t.getSize();var width=objSize.width;}var addClass="";if(width<=480){addClass="ug-under-480";}else
if(width<=780){addClass="ug-under-780";}else
if(width<960){addClass="ug-under-960";}if(objWrapper.hasClass(addClass)==true)return(true);removeAllSizeClasses(objWrapper);if(addClass!="")objWrapper.addClass(addClass);}
this.isMobileMode=function(){if(g_objWrapper.hasClass("ug-under-480"))return(true);return(false);}
this.changeItems=function(itemsContent,cacheID){if(!itemsContent)var itemsContent="noitems";runGallery(g_galleryID,"nochange",itemsContent,cacheID);}
this.showErrorMessageReplaceGallery=function(message){showErrorMessage(message);}
this.__________AJAX_REQUEST_______=function(){};this.ajaxRequest=function(action,data,isJSON,successFunction){var dataType="html";if(isJSON==true)dataType="json";if(!successFunction||typeof successFunction!="function")throw new Error("ajaxRequest error: success function should be passed");var urlAjax=g_options.gallery_urlajax;if(urlAjax=="")throw new Error("ajaxRequest error: Ajax url don't passed");if(typeof data=="undefined")var data={};var objData={action:"unitegallery_ajax_action",client_action:action,galleryID:g_galleryID,data:data};jQuery.ajax({type:"post",url:g_options.gallery_urlajax,dataType:'json',data:objData,success:function(response){if(!response){showErrorMessage("Empty ajax response!","Ajax Error");return(false);}if(response==-1||response===0){showErrorMessage("ajax error!!!");return(false);}if(typeof response.success=="undefined"){showErrorMessage("The 'success' param is a must!");return(false);}if(response.success==false){showErrorMessage(response.message);return(false);}successFunction(response);},error:function(jqXHR,textStatus,errorThrown){console.log("Ajax Error!!! "+textStatus);}});}
this.requestNewItems=function(catID,isForce,cacheID){var checkCache=g_options.gallery_enable_cache;if(!cacheID)cacheID=catID;if(isForce==true)checkCache=false;if(checkCache==true&&g_objCache.hasOwnProperty(cacheID)){var htmlItems=g_objCache[cacheID];t.changeItems(htmlItems,cacheID);}else{g_objGallery.trigger(t.events.GALLERY_BEFORE_REQUEST_ITEMS);t.ajaxRequest("front_get_cat_items",{catid:catID},true,function(response){var htmlItems=response.html;t.changeItems(htmlItems,cacheID);});}}
this.run=function(galleryID,objParams){var debug_errors=g_options.gallery_debug_errors;if(objParams&&objParams.hasOwnProperty("gallery_debug_errors"))g_options.gallery_debug_errors=objParams.gallery_debug_errors;if(g_options.gallery_debug_errors==true){try{runGallery(galleryID,objParams);}catch(objError){if(typeof objError=="object"){var message=objError.message;var lineNumber=objError.lineNumber;var fileName=objError.fileName;var stack=objError.stack;message+=" <br><br> in file: "+fileName;message+=" <b> line "+lineNumber+"</b>";trace(objError);}else{var message=objError;}message=message.replace("Error:","");showErrorMessage(message);}}else{runGallery(galleryID,objParams);}}}