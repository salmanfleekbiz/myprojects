function UGPanelsBase(){var g_temp,g_panel,g_objPanel,g_options,g_objThis;var g_gallery=new UniteGalleryMain();var t=this,g_objHandle,g_objGallery;var g_functions=new UGFunctions();this.init=function(gallery,g_tempArg,g_panelArg,options,g_objThisArg){g_temp=g_tempArg;g_panel=g_panelArg;g_gallery=gallery;g_options=options;g_objThis=g_objThisArg;g_objGallery=jQuery(g_gallery);}
this.setHtml=function(g_objPanelArg){g_objPanel=g_objPanelArg;if(g_temp.panelType=="strip")var enable_handle=g_options.strippanel_enable_handle;else
var enable_handle=g_options.gridpanel_enable_handle;if(enable_handle==true){g_objHandle=new UGPanelHandle();g_objHandle.init(g_panel,g_objPanel,g_options,g_temp.panelType,g_gallery);g_objHandle.setHtml();}if(g_temp.isDisabledAtStart===true){var html="<div class='ug-overlay-disabled'></div>";g_objPanel.append(html);setTimeout(function(){g_objPanel.children(".ug-overlay-disabled").hide();},g_temp.disabledAtStartTimeout);}}
this.placeElements=function(){if(g_objHandle)g_objHandle.placeHandle();}
this.initEvents=function(){if(g_objHandle){g_objHandle.initEvents();g_objGallery.on(g_gallery.events.SLIDER_ACTION_START,function(){g_objHandle.hideHandle();});g_objGallery.on(g_gallery.events.SLIDER_ACTION_END,function(){g_objHandle.showHandle();});}}
this.destroy=function(){if(g_objHandle){g_objHandle.destroy();g_objGallery.off(g_gallery.events.SLIDER_ACTION_START);g_objGallery.off(g_gallery.events.SLIDER_ACTION_END);}}
function placePanelAnimation(panelDest,functionOnComplete){switch(g_temp.orientation){case"right":case"left":var objCss={left:panelDest+"px"};break;case"top":case"bottom":var objCss={top:panelDest+"px"};break;}g_objPanel.stop(true).animate(objCss,{duration:300,easing:"easeInOutQuad",queue:false,complete:function(){if(functionOnComplete)functionOnComplete();}});}function placePanelNoAnimation(panelDest){switch(g_temp.orientation){case"right":case"left":g_functions.placeElement(g_objPanel,panelDest,null);break;case"top":case"bottom":g_functions.placeElement(g_objPanel,null,panelDest);break;}}function onPanelSlideFinish(){g_objThis.trigger(g_panel.events.FINISH_MOVE);}this.openPanel=function(noAnimation){if(!noAnimation)var noAnimation=false;if(g_objPanel.is(":animated"))return(false);if(g_temp.isClosed==false)return(false);g_temp.isClosed=false;g_objThis.trigger(g_panel.events.OPEN_PANEL);if(noAnimation===false)placePanelAnimation(g_temp.originalPos,onPanelSlideFinish);else{placePanelNoAnimation(g_temp.originalPos);onPanelSlideFinish();}}
this.closePanel=function(noAnimation){if(!noAnimation)var noAnimation=false;if(g_objPanel.is(":animated"))return(false);if(g_temp.isClosed==true)return(false);var panelDest=t.getClosedPanelDest();g_temp.isClosed=true;g_objThis.trigger(g_panel.events.CLOSE_PANEL);if(noAnimation===false)placePanelAnimation(panelDest,onPanelSlideFinish);else{placePanelNoAnimation(panelDest);onPanelSlideFinish();}}
this.setClosedState=function(originalPos){g_temp.originalPos=originalPos;g_objThis.trigger(g_panel.events.CLOSE_PANEL);g_temp.isClosed=true;}
this.setOpenedState=function(originalPos){g_objThis.trigger(g_panel.events.OPEN_PANEL);g_temp.isClosed=false;}
this.getClosedPanelDest=function(){var objPanelSize=g_functions.getElementSize(g_objPanel),panelDest;switch(g_temp.orientation){case"left":g_temp.originalPos=objPanelSize.left;panelDest=-g_temp.panelWidth;break;case"right":g_temp.originalPos=objPanelSize.left;var gallerySize=g_gallery.getSize();panelDest=gallerySize.width;break;case"top":g_temp.originalPos=objPanelSize.top;panelDest=-g_temp.panelHeight;break;case"bottom":g_temp.originalPos=objPanelSize.top;var gallerySize=g_gallery.getSize();panelDest=gallerySize.height;break;}return(panelDest);}
this.isPanelClosed=function(){return(g_temp.isClosed);}
this.setDisabledAtStart=function(timeout){if(timeout<=0)return(false);g_temp.isDisabledAtStart=true;g_temp.disabledAtStartTimeout=timeout;}}function UGPanelHandle(){var t=this,g_objPanel,g_panel,g_objHandleTip,g_panelOptions={};var g_functions=new UGFunctions();var g_options={panel_handle_align:"top",panel_handle_offset:0,panel_handle_skin:0};this.init=function(panel,objPanel,panelOptions,panelType,gallery){g_panel=panel;g_objPanel=objPanel;switch(panelType){case"grid":g_options.panel_handle_align=panelOptions.gridpanel_handle_align;g_options.panel_handle_offset=panelOptions.gridpanel_handle_offset;g_options.panel_handle_skin=panelOptions.gridpanel_handle_skin;break;case"strip":g_options.panel_handle_align=panelOptions.strippanel_handle_align;g_options.panel_handle_offset=panelOptions.strippanel_handle_offset;g_options.panel_handle_skin=panelOptions.strippanel_handle_skin;break;default:throw new Error("Panel handle error: wrong panel type: "+panelType);break;}var galleryOptions=gallery.getOptions();var globalSkin=galleryOptions.gallery_skin;if(g_options.panel_handle_skin=="")g_options.panel_handle_skin=globalSkin;}
this.setHtml=function(){var orientation=g_panel.getOrientation();var classTip="ug-panel-handle-tip";switch(orientation){case"right":classTip+=" ug-handle-tip-left";break;case"left":classTip+=" ug-handle-tip-right";break;case"bottom":classTip+=" ug-handle-tip-top";break;case"top":classTip+=" ug-handle-tip-bottom";break;}g_objPanel.append("<div class='"+classTip+" ug-skin-"+g_options.panel_handle_skin+"'></div>");g_objHandleTip=g_objPanel.children(".ug-panel-handle-tip");}
function removeHoverState(){g_objHandleTip.removeClass("ug-button-hover");}function setClosedState(){g_objHandleTip.addClass("ug-button-closed");}function removeClosedState(){g_objHandleTip.removeClass("ug-button-closed");}function onHandleClick(event){event.stopPropagation();event.stopImmediatePropagation();if(g_functions.validateClickTouchstartEvent(event.type)==false)return(true);if(g_panel.isPanelClosed())g_panel.openPanel();else
g_panel.closePanel();}this.initEvents=function(){g_functions.addClassOnHover(g_objHandleTip);g_objHandleTip.bind("click touchstart",onHandleClick);jQuery(g_panel).on(g_panel.events.OPEN_PANEL,function(){removeHoverState();removeClosedState();});jQuery(g_panel).on(g_panel.events.CLOSE_PANEL,function(){removeHoverState();setClosedState();});}
this.destroy=function(){g_functions.destroyButton(g_objHandleTip);jQuery(g_panel).off(g_panel.events.OPEN_PANEL);jQuery(g_panel).off(g_panel.events.CLOSE_PANEL);}
function checkAndFixAlign(){var orientation=g_panel.getOrientation();switch(orientation){case"right":case"left":if(g_options.panel_handle_align!="top"&&g_options.panel_handle_align!="bottom")g_options.panel_handle_align="top";break;case"bottom":if(g_options.panel_handle_align!="left"&&g_options.panel_handle_align!="right")g_options.panel_handle_align="left";break;case"top":if(g_options.panel_handle_align!="left"&&g_options.panel_handle_align!="right")g_options.panel_handle_align="right";break;}}this.placeHandle=function(){var handleSize=g_functions.getElementSize(g_objHandleTip);checkAndFixAlign();var orientation=g_panel.getOrientation();switch(orientation){case"left":g_functions.placeElement(g_objHandleTip,"right",g_options.panel_handle_align,-handleSize.width);break;case"right":g_functions.placeElement(g_objHandleTip,-handleSize.width,g_options.panel_handle_align,0,g_options.panel_handle_offset);break;case"top":g_functions.placeElement(g_objHandleTip,g_options.panel_handle_align,"bottom",g_options.panel_handle_offset,-handleSize.height);break;case"bottom":g_functions.placeElement(g_objHandleTip,g_options.panel_handle_align,"top",g_options.panel_handle_offset,-handleSize.height);break;default:throw new Error("Wrong panel orientation: "+orientation);break;}}
this.hideHandle=function(){if(g_objHandleTip.is(":visible")==true)g_objHandleTip.hide();}
this.showHandle=function(){if(g_objHandleTip.is(":visible")==false)g_objHandleTip.show();}}